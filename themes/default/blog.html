<!DOCTYPE html>
<html>
    <head>
        <title id="title"></title>
        <link rel="stylesheet" type="text/css" href="static/style.css">
        <link rel="stylesheet" type="text/css" href="static/fonts.css">
        <script src="static/js-yaml.min.js"></script>
        <script src="static/showdown.min.js"></script>
        <link rel="icon" type="image/svg" href="static/img/logo.svg">
    </head>
    <top id="top"/>
    <body>
        <div class="menu">
            <a href="index.html" class="menuBtn title" id="titlebtn"></a>
            <a class="menuBtn" href="blog.html">Blog</a>
            <a class="menuBtn" href="about.html">About</a>
        </div>

        <div class="toTop">
            <a class="menuBtn red" href="#top">â–²</a>
        </div>
        <script type="text/javascript">
            fetch('settings.yaml')
                .then(response => response.text())
                .then(data => {
                  // Do something with your data
                var doc = jsyaml.load(data);
                document.getElementsByTagName("footer")[0].innerHTML = doc.settings.copyright_info;
                document.getElementById("title").innerHTML = doc.settings.site_name;
                document.getElementById("titlebtn").innerHTML = doc.settings.site_name;
            });
        </script>

        <script type="text/javascript">
            fetch('posts.yaml')
                .then(response => response.text())
                .then(data => {
                  // Do something with your data
                var doc = jsyaml.load(data);
                for (const post of doc.posts) {
                    // instantiate a markdown converter
                    var converter = new showdown.Converter();
                    // create html from post in markdown form
                    var markdown_html = converter.makeHtml(post.content);
                    // get the posts container element
                    var postsElement = document.getElementById("posts");
                    // create a new div for the post
                    var element = document.createElement('div');
                    // get the fake "link" to the post
                    var post_link = "posts.html?name=" + post.name;
                    // set the post's html to the template
                    element.innerHTML = `
                        <div class="jumboWrapper" id="${post.name}">
                            <div id="${post.name}Img" class="jumbo" style="background-image: url('${post.featured_image}');"></div>
                                <div class="contentWrapper">
                                    <div class="titleBlock">
                                        <h2>${post.name}</h2>
                                        <h5>${post.author} on ${post.date}</h5>
                                    </div>
                                <div class="inner">
                                    <p>
                                        ${markdown_html}<a href="${post_link}" class="readMoreBtn">Read more...</a>
                                    </p>
                                </div>
                            </div>
                                </div>

                    `;
                    postsElement.appendChild(element);

                    if (post.featured_image == "none") {
                        var featuredimg = document.getElementById(post.name + "Img")
                        featuredimg.remove();
                    }
                }
            });
        </script>
        <div id="posts">
        
        </posts>
    </body>
    <footer>
        
    </footer>
</html>

